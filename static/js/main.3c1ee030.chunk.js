(this.webpackJsonpfamily_tree=this.webpackJsonpfamily_tree||[]).push([[0],{106:function(e,t,a){e.exports={PersonDetails:"PersonDetails_PersonDetails__1Bp2N",personPicture:"PersonDetails_personPicture__33QtK",personName:"PersonDetails_personName__3i9Fr"}},189:function(e,t,a){},190:function(e,t,a){},296:function(e,t,a){"use strict";a.r(t);var r,i=a(0),n=a.n(i),s=a(43),c=a.n(s),l=(a(189),a(190),a(191),a(69)),o=a.n(l),d=a(20),m=a(104),b=a(8),h=a(50),j=a.n(h),u=a(382),p=a(368),O=a(355),f=a(356),x=a(357),v=a(31),_=a(62),N=a.n(_),D=a(78),C=function(){return Object(D.b)()},g=D.c,y=a(105);!function(e){e.Child="CHILD",e.Sibling="SIBLING"}(r||(r={}));var F=Object(y.b)({name:"family",initialState:{members:{1:{id:"1",firstName:"Gandalf",lastName:"The Grey",birthDate:"1800-08-08",deathDate:"",parentId:"",picture:"https://static.wikia.nocookie.net/lotr/images/e/e7/Gandalf_the_Grey.jpg",relationship:"CHILD",children:["2","3"]},2:{id:"2",firstName:"Gollum",lastName:"",birthDate:"1900-08-08",deathDate:"",picture:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTvJrlM-cfSK6IuVGnTh0KQzheSKkMzIlaoGw",parentId:"1",relationship:"",children:[]},3:{id:"3",firstName:"Sauron",lastName:"",birthDate:"1900-08-08",deathDate:"",picture:"https://i.redd.it/be1sw1tji5s51.jpg",parentId:"1",relationship:"",children:[]}}},reducers:{addMember:function(e,t){var a,i=t.payload,n=i.formData,s=i.selectedMember,c=n.relationship===r.Sibling?(null===(a=e.members[s.parentId])||void 0===a?void 0:a.id)||"":s.id,l=Object(v.a)(Object(v.a)({},n),{},{id:Date.now().toString(36)+Math.random().toString(36).substr(2),children:[],parentId:c});e.members[l.id]=l},removeMember:function(e,t){var a=t.payload;delete e.members[a.id]},updateMember:function(e,t){var a=t.payload,i=a.formData,n=a.selectedMember,s=i.relationship===r.Sibling?e.members[n.parentId].parentId:n.parentId||"";e.members[n.id]=Object(v.a)(Object(v.a)(Object(v.a)({},e.members[n.id]),i),{},{parentId:s})}}}),S=F.actions,I=S.addMember,T=S.removeMember,M=S.updateMember,k=function(e){return function(e){var t=Object.create(null);e.forEach((function(e){return t[e.id]=Object(v.a)(Object(v.a)({},e),{},{children:[]})}));var a=[];return e.forEach((function(e){var r;e.parentId?null===(r=t[e.parentId])||void 0===r||r.children.push(t[e.id]):a.push(t[e.id])})),a}(Object.values(e.family.members))},w=F.reducer,P=a(57),B=a(370),E=a(364),q=a(365),R=a(360),V=a(363),G=a(374),H=a(375),L=a(379),A=a(167),W=a(358),z=a(106),K=a.n(z),U=a(1),J=function(e){var t=e.member;return Object(U.jsxs)("div",{className:K.a.PersonDetails,"data-testid":"PersonDetails",children:[Object(U.jsx)("div",{className:K.a.personPicture,children:t.picture&&Object(U.jsx)("img",{src:t.picture,alt:"memberPicture"})}),Object(U.jsxs)("div",{className:K.a.personName,children:[Object(U.jsx)("div",{children:t.firstName}),Object(U.jsx)("div",{children:t.lastName}),Object(U.jsxs)("div",{children:[t.birthDate," - ",t.deathDate]})]})]})},Q=P.b({firstName:P.c().required("First Name is required"),lastName:P.c().required("Last Name is required"),birthDate:P.a().required("Birth date is required"),deathDate:P.c(),picture:P.c(),relationship:P.c().required("Relationship is required")}),X=function(e){var t,a=e.selectedMember,i=e.isEditMode,n=e.handleClose,s=C(),c=g((t=i?a.parentId:a.id,function(e){return e.family.members[t]})),l=Object(A.a)({initialValues:i?Object(v.a)({},a):{firstName:"",lastName:"",birthDate:"",deathDate:"",picture:"",relationship:"CHILD"},validationSchema:Q,onSubmit:function(e){s(i?M({formData:e,selectedMember:a}):I({formData:e,selectedMember:a})),n()}});return Object(U.jsxs)("div",{className:N.a.CreateEditForm,"data-testid":"CreateEditForm",children:[Object(U.jsxs)("div",{className:N.a.parentDetails,children:[i&&Object(U.jsxs)("div",{children:[Object(U.jsx)(B.a,{className:N.a.formTitle,variant:"h4",component:"h4",children:"Editing:"}),Object(U.jsx)(J,{member:a})]}),Object(U.jsxs)("div",{children:[i?Object(U.jsx)(B.a,{className:N.a.formTitle,variant:"subtitle1",children:"Parent:"}):Object(U.jsx)(B.a,{className:N.a.formTitle,variant:"h4",children:"Creating relationship to:"}),c&&Object(U.jsx)(J,{member:c})]})]}),Object(U.jsxs)("form",{className:N.a.formContainer,onSubmit:l.handleSubmit,children:[Object(U.jsxs)(E.a,{fullWidth:!0,error:l.touched.relationship&&Boolean(l.errors.relationship),children:[Object(U.jsxs)(q.a,{id:"relationship-label",children:["Relationship to ",i?"current parent":"selected member"]}),Object(U.jsxs)(R.a,{labelId:"relationship-label",id:"relationship",value:l.values.relationship,onChange:function(e){return l.setFieldValue("relationship",e.target.value)},children:[Object(U.jsx)(V.a,{value:r.Child,children:"Child"}),Object(U.jsx)(V.a,{value:r.Sibling,children:"Sibling"})]}),l.errors.relationship&&Object(U.jsx)(G.a,{children:l.errors.relationship})]}),Object(U.jsx)(H.a,{id:"firstName",name:"firstName",label:"FirstName",value:l.values.firstName,onChange:l.handleChange,error:l.touched.firstName&&Boolean(l.errors.firstName),helperText:l.touched.firstName&&l.errors.firstName}),Object(U.jsx)(H.a,{id:"lastName",name:"lastName",label:"LastName",value:l.values.lastName,onChange:l.handleChange,error:l.touched.lastName&&Boolean(l.errors.lastName),helperText:l.touched.lastName&&l.errors.lastName}),Object(U.jsxs)(E.a,{error:l.touched.birthDate&&Boolean(l.errors.birthDate),children:[Object(U.jsx)(W.a,{label:"Birth Date",mask:"____/__/__",inputFormat:"yyyy/MM/dd",value:l.values.birthDate,onChange:function(e){return l.setFieldValue("birthDate",!isNaN(Date.parse(e))&&e.toISOString().split("T")[0])},renderInput:function(e){return Object(U.jsx)(H.a,Object(v.a)(Object(v.a)({},e),{},{id:"birthDate",name:"birthDate",error:l.touched.birthDate&&Boolean(l.errors.birthDate)}))}}),l.errors.birthDate&&Object(U.jsx)(G.a,{children:l.errors.birthDate})]}),Object(U.jsx)(W.a,{label:"Death Date",mask:"____/__/__",inputFormat:"yyyy/MM/dd",value:l.values.deathDate,onChange:function(e){return l.setFieldValue("deathDate",!isNaN(Date.parse(e))&&e.toISOString().split("T")[0])},renderInput:function(e){return Object(U.jsx)(H.a,Object(v.a)(Object(v.a)({},e),{},{id:"deathDate",name:"deathDate",error:l.touched.deathDate&&Boolean(l.errors.deathDate)}))}}),Object(U.jsx)(H.a,{fullWidth:!0,id:"picture",name:"picture",label:"Picture link",value:l.values.picture,onChange:l.handleChange,error:l.touched.picture&&Boolean(l.errors.picture),helperText:l.touched.picture&&l.errors.picture}),Object(U.jsxs)("div",{children:[Object(U.jsx)(L.a,{color:"primary",variant:"contained",fullWidth:!0,type:"submit",children:"Save"}),Object(U.jsx)(L.a,{color:"primary",variant:"outlined",fullWidth:!0,type:"button",onClick:function(){n()},children:"Cancel"})]})]})]})},$=a(376),Y=a(380),Z=a(377),ee=a(381),te=a(378),ae=function(e){return Object(U.jsxs)($.a,{open:e.open,onClose:e.onClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(U.jsx)(Y.a,{id:"alert-dialog-title",children:"Do you want to delete?"}),Object(U.jsx)(Z.a,{children:Object(U.jsx)(ee.a,{id:"alert-dialog-description",children:"Do you want to delete family member with its relationships ?"})}),Object(U.jsxs)(te.a,{children:[Object(U.jsx)(L.a,{onClick:e.onClose,children:"Disagree"}),Object(U.jsx)(L.a,{onClick:e.onSubmit,autoFocus:!0,color:"primary",variant:"contained",children:"Agree"})]})]})},re=function(e){var t=e.editingView,a=Object(i.useState)(!1),r=Object(b.a)(a,2),s=r[0],c=r[1],l=Object(i.useState)({}),o=Object(b.a)(l,2),d=o[0],m=o[1],h=Object(i.useState)(!1),v=Object(b.a)(h,2),_=v[0],N=v[1],D=g(k),y=C();Object(i.useEffect)((function(){D.length||y(I({formData:{id:"0",parentId:"",relationship:"",firstName:"Root",lastName:"",birthDate:"",deathDate:"",picture:"",children:[]},selectedMember:{}}))}),[y,D]);var F=function(e,t){return function(a){(!a||"keydown"!==a.type||"Tab"!==a.key&&"Shift"!==a.key)&&(N(!!t),m(e),c(!s))}},S=n.a.useState(!1),M=Object(b.a)(S,2),w=M[0],P=M[1],B=function(e){return function(t){m(e),P(!0)}},E=function(){P(!1)};return Object(U.jsxs)("div",{className:j.a.FamilyTree,children:[Object(U.jsx)("div",{className:j.a.treeContainer,children:function e(a){return Object(U.jsx)("ul",{children:a.map((function(a){return Object(U.jsxs)("li",{children:[Object(U.jsxs)("div",{className:j.a.personContainer,children:[Object(U.jsx)(J,{member:a}),Object(U.jsx)("div",{className:j.a.actionButtons,children:t&&Object(U.jsxs)("div",{children:[" ",(r=a,Object(U.jsxs)(U.Fragment,{children:[Object(U.jsxs)(u.a,{onClick:F(r),className:j.a.miniFab,children:[" ",Object(U.jsx)(O.a,{fontSize:"small"})]}),Object(U.jsxs)(u.a,{onClick:F(r,!0),className:j.a.miniFab,children:[" ",Object(U.jsx)(f.a,{fontSize:"small"})]}),Object(U.jsxs)(u.a,{onClick:B(r),className:j.a.miniFab,children:[" ",Object(U.jsx)(x.a,{fontSize:"small"})]})]}))]})})]}),!!a.children.length&&e(a.children)]},a.id);var r}))})}(D)}),Object(U.jsx)(p.a,{anchor:"right",open:s,onClose:F({}),classes:{paper:j.a.drawerPaper},children:Object(U.jsx)(X,{selectedMember:d,isEditMode:_,handleClose:F({})})}),Object(U.jsx)(ae,{open:w,onClose:E,onSubmit:function(){return y(T(d)),void E()}})]})},ie=function(){var e=Object(d.f)();return Object(U.jsxs)("div",{className:o.a.Header,children:[Object(U.jsx)("ul",{className:o.a.navContainer,children:[{title:"View Tree",pageURL:"/"},{title:"Edit Tree",pageURL:"/edit"}].map((function(t){var a=t.title,r=t.pageURL;return Object(U.jsx)("li",{className:"".concat(o.a.listItem," ").concat(e.pathname===r&&o.a.active),children:Object(U.jsx)(m.b,{to:r,className:o.a.link,children:a})},a)}))}),Object(U.jsxs)(d.c,{children:[Object(U.jsx)(d.a,{path:"/edit",children:Object(U.jsx)(re,{editingView:!0})}),Object(U.jsx)(d.a,{path:"/",component:re})]})]})},ne=a(359),se=a(354);var ce=function(){return Object(U.jsx)(se.b,{dateAdapter:ne.a,children:Object(U.jsx)("div",{className:"App",children:Object(U.jsx)(m.a,{children:Object(U.jsx)(ie,{})})})})},le=Object(y.a)({reducer:{family:w}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(Object(U.jsx)(n.a.StrictMode,{children:Object(U.jsx)(D.a,{store:le,children:Object(U.jsx)(ce,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},50:function(e,t,a){e.exports={FamilyTree:"FamilyTree_FamilyTree__3_hrA",personContainer:"FamilyTree_personContainer__xP1Sc",actionButtons:"FamilyTree_actionButtons__2UUv6",miniFab:"FamilyTree_miniFab__3Xi-q",drawerPaper:"FamilyTree_drawerPaper__1Rrm6",treeContainer:"FamilyTree_treeContainer__2t9MC"}},62:function(e,t,a){e.exports={CreateEditForm:"CreateEditForm_CreateEditForm__26y4T",formContainer:"CreateEditForm_formContainer___HcJp",parentDetails:"CreateEditForm_parentDetails__sRzkV",formTitle:"CreateEditForm_formTitle__3q2qS"}},69:function(e,t,a){e.exports={navContainer:"Header_navContainer__RAlFR",listItem:"Header_listItem__3IFPB",link:"Header_link__1VmKW",active:"Header_active__3F14A"}}},[[296,1,2]]]);
//# sourceMappingURL=main.3c1ee030.chunk.js.map